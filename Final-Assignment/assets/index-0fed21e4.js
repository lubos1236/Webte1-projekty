var Yt=Object.defineProperty;var Kt=(t,e,n)=>e in t?Yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>(Kt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function I(){}const me=t=>t;function fe(t,e){for(const n in e)t[n]=e[n];return t}function kt(t){return t()}function ot(){return Object.create(null)}function Y(t){t.forEach(kt)}function pe(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Be;function xe(t,e){return Be||(Be=document.createElement("a")),Be.href=e,t===Be.href}function Jt(t){return Object.keys(t).length===0}function We(t,...e){if(t==null)return I;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Vt(t){let e;return We(t,n=>e=n)(),e}function Xe(t,e,n){t.$$.on_destroy.push(We(e,n))}function Zt(t,e,n,i){if(t){const s=Bt(t,e,n,i);return t[0](s)}}function Bt(t,e,n,i){return t[1]&&i?fe(n.ctx.slice(),t[1](i(e))):n.ctx}function Qt(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],a=Math.max(e.dirty.length,s.length);for(let r=0;r<a;r+=1)o[r]=e.dirty[r]|s[r];return o}return e.dirty|s}return e.dirty}function en(t,e,n,i,s,o){if(s){const a=Bt(e,n,i,o);t.p(a,s)}}function tn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function rt(t){return t??""}const Et=typeof window<"u";let Oe=Et?()=>window.performance.now():()=>Date.now(),Ye=Et?t=>requestAnimationFrame(t):I;const ce=new Set;function $t(t){ce.forEach(e=>{e.c(t)||(ce.delete(e),e.f())}),ce.size!==0&&Ye($t)}function je(t){let e;return ce.size===0&&Ye($t),{promise:new Promise(n=>{ce.add(e={c:t,f:n})}),abort(){ce.delete(e)}}}function v(t,e){t.appendChild(e)}function Tt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function nn(t){const e=B("style");return sn(Tt(t),e),e.sheet}function sn(t,e){return v(t.head||t,e),e.sheet}function P(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function on(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function B(t){return document.createElement(t)}function rn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function R(t){return document.createTextNode(t)}function S(){return R(" ")}function we(){return R("")}function N(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ln(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function lt(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}function an(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function re(t,e,n){t.classList[n?"add":"remove"](e)}function Lt(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}class cn{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=rn(n.nodeName):this.e=B(n.nodeName),this.t=n,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)P(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(T)}}function de(t,e){return new t(e)}const Pe=new Map;let Ce=0;function un(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function fn(t,e){const n={stylesheet:nn(e),rules:{}};return Pe.set(t,n),n}function Ke(t,e,n,i,s,o,a,r=0){const l=16.666/i;let c=`{
`;for(let w=0;w<=1;w+=l){const $=e+(n-e)*o(w);c+=w*100+`%{${a($,1-$)}}
`}const u=c+`100% {${a(n,1-n)}}
}`,d=`__svelte_${un(u)}_${r}`,h=Tt(t),{stylesheet:f,rules:m}=Pe.get(h)||fn(h,t);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${d} ${i}ms linear ${s}ms 1 both`,Ce+=1,d}function Ie(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=n.length-i.length;s&&(t.style.animation=i.join(", "),Ce-=s,Ce||dn())}function dn(){Ye(()=>{Ce||(Pe.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&T(e)}),Pe.clear())})}function hn(t,e,n,i){if(!e)return I;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return I;const{delay:o=0,duration:a=300,easing:r=me,start:l=Oe()+o,end:c=l+a,tick:u=I,css:d}=n(t,{from:e,to:s},i);let h=!0,f=!1,m;function y(){d&&(m=Ke(t,0,1,a,o,r,d)),o||(f=!0)}function w(){d&&Ie(t,m),h=!1}return je($=>{if(!f&&$>=l&&(f=!0),f&&$>=c&&(u(1,0),w()),!h)return!1;if(f){const L=$-l,b=0+1*r(L/a);u(b,1-b)}return!0}),y(),u(0,1),w}function mn(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,xt(t,s)}}function xt(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),s=i.transform==="none"?"":i.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let ye;function ve(t){ye=t}function He(){if(!ye)throw new Error("Function called outside component initialization");return ye}function Pt(t){He().$$.on_mount.push(t)}function pn(t){He().$$.after_update.push(t)}function ke(t){He().$$.on_destroy.push(t)}function Je(){const t=He();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Lt(e,n,{cancelable:i});return s.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function ze(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ge=[],Ne=[],Te=[],at=[],Ct=Promise.resolve();let Re=!1;function It(){Re||(Re=!0,Ct.then(Dt))}function St(){return It(),Ct}function te(t){Te.push(t)}const Ge=new Set;let Ee=0;function Dt(){const t=ye;do{for(;Ee<ge.length;){const e=ge[Ee];Ee++,ve(e),_n(e.$$)}for(ve(null),ge.length=0,Ee=0;Ne.length;)Ne.pop()();for(let e=0;e<Te.length;e+=1){const n=Te[e];Ge.has(n)||(Ge.add(n),n())}Te.length=0}while(ge.length);for(;at.length;)at.pop()();Re=!1,Ge.clear(),ve(t)}function _n(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(te)}}let _e;function Mt(){return _e||(_e=Promise.resolve(),_e.then(()=>{_e=null})),_e}function Se(t,e,n){t.dispatchEvent(Lt(`${e?"intro":"outro"}${n}`))}const Le=new Set;let Z;function ie(){Z={r:0,c:[],p:Z}}function se(){Z.r||Y(Z.c),Z=Z.p}function M(t,e){t&&t.i&&(Le.delete(t),t.i(e))}function A(t,e,n,i){if(t&&t.o){if(Le.has(t))return;Le.add(t),Z.c.push(()=>{Le.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const At={duration:0};function gn(t,e,n){const i={direction:"in"};let s=e(t,n,i),o=!1,a,r,l=0;function c(){a&&Ie(t,a)}function u(){const{delay:h=0,duration:f=300,easing:m=me,tick:y=I,css:w}=s||At;w&&(a=Ke(t,0,1,f,h,m,w,l++)),y(0,1);const $=Oe()+h,L=$+f;r&&r.abort(),o=!0,te(()=>Se(t,!0,"start")),r=je(b=>{if(o){if(b>=L)return y(1,0),Se(t,!0,"end"),c(),o=!1;if(b>=$){const k=m((b-$)/f);y(k,1-k)}}return o})}let d=!1;return{start(){d||(d=!0,Ie(t),pe(s)?(s=s(i),Mt().then(u)):u())},invalidate(){d=!1},end(){o&&(c(),o=!1)}}}function vn(t,e,n){const i={direction:"out"};let s=e(t,n,i),o=!0,a;const r=Z;r.r+=1;function l(){const{delay:c=0,duration:u=300,easing:d=me,tick:h=I,css:f}=s||At;f&&(a=Ke(t,1,0,u,c,d,f));const m=Oe()+c,y=m+u;te(()=>Se(t,!1,"start")),je(w=>{if(o){if(w>=y)return h(0,1),Se(t,!1,"end"),--r.r||Y(r.c),!1;if(w>=m){const $=d((w-m)/u);h(1-$,$)}}return o})}return pe(s)?Mt().then(()=>{s=s(i),l()}):l(),{end(c){c&&s.tick&&s.tick(1,0),o&&(a&&Ie(t,a),o=!1)}}}function bn(t,e){A(t,1,1,()=>{e.delete(t.key)})}function yn(t,e){t.f(),bn(t,e)}function wn(t,e,n,i,s,o,a,r,l,c,u,d){let h=t.length,f=o.length,m=h;const y={};for(;m--;)y[t[m].key]=m;const w=[],$=new Map,L=new Map;for(m=f;m--;){const g=d(s,o,m),C=n(g);let E=a.get(C);E?i&&E.p(g,e):(E=c(C,g),E.c()),$.set(C,w[m]=E),C in y&&L.set(C,Math.abs(m-y[C]))}const b=new Set,k=new Set;function p(g){M(g,1),g.m(r,u),a.set(g.key,g),u=g.first,f--}for(;h&&f;){const g=w[f-1],C=t[h-1],E=g.key,x=C.key;g===C?(u=g.first,h--,f--):$.has(x)?!a.has(E)||b.has(E)?p(g):k.has(x)?h--:L.get(E)>L.get(x)?(k.add(E),p(g)):(b.add(x),h--):(l(C,a),h--)}for(;h--;){const g=t[h];$.has(g.key)||l(g,a)}for(;f;)p(w[f-1]);return w}function Ve(t,e){const n={},i={},s={$$scope:1};let o=t.length;for(;o--;){const a=t[o],r=e[o];if(r){for(const l in a)l in r||(i[l]=1);for(const l in r)s[l]||(n[l]=r[l],s[l]=1);t[o]=r}else for(const l in a)s[l]=1}for(const a in i)a in n||(n[a]=void 0);return n}function Ze(t){return typeof t=="object"&&t!==null?t:{}}function z(t){t&&t.c()}function H(t,e,n,i){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),i||te(()=>{const a=t.$$.on_mount.map(kt).filter(pe);t.$$.on_destroy?t.$$.on_destroy.push(...a):Y(a),t.$$.on_mount=[]}),o.forEach(te)}function G(t,e){const n=t.$$;n.fragment!==null&&(Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kn(t,e){t.$$.dirty[0]===-1&&(ge.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,i,s,o,a,r=[-1]){const l=ye;ve(t);const c=t.$$={fragment:null,ctx:[],props:o,update:I,not_equal:s,bound:ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ot(),dirty:r,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(d,h,...f)=>{const m=f.length?f[0]:h;return c.ctx&&s(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),u&&kn(t,d)),h}):[],c.update(),u=!0,Y(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const d=ln(e.target);c.fragment&&c.fragment.l(d),d.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&M(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),Dt()}ve(l)}class W{$destroy(){G(this,1),this.$destroy=I}$on(e,n){if(!pe(n))return I;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Jt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function Ot(t,e){return{subscribe:ee(t,e).subscribe}}function ee(t,e=I){let n;const i=new Set;function s(r){if(F(t,r)&&(t=r,n)){const l=!oe.length;for(const c of i)c[1](),oe.push(c,t);if(l){for(let c=0;c<oe.length;c+=2)oe[c][0](oe[c+1]);oe.length=0}}}function o(r){s(r(t))}function a(r,l=I){const c=[r,l];return i.add(c),i.size===1&&(n=e(s)||I),r(t),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:s,update:o,subscribe:a}}function jt(t,e,n){const i=!Array.isArray(t),s=i?[t]:t,o=e.length<2;return Ot(n,a=>{let r=!1;const l=[];let c=0,u=I;const d=()=>{if(c)return;u();const f=e(i?l[0]:l,a);o?a(f):u=pe(f)?f:I},h=s.map((f,m)=>We(f,y=>{l[m]=y,c&=~(1<<m),r&&d()},()=>{c|=1<<m}));return r=!0,d(),function(){Y(h),u()}})}function Bn(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,s,o,a=[],r="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(a.push("wild"),r+="/(.*)"):n===":"?(i=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~i?i:~o?o:s.length)),r+=~i&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(r+=(~i?"?":"")+"\\"+s.substring(o))):r+="/"+s;return{keys:a,pattern:new RegExp("^"+r+(e?"(?=$|/)":"/?$"),"i")}}function En(t){let e,n,i;const s=[t[2]];var o=t[0];function a(r){let l={};for(let c=0;c<s.length;c+=1)l=fe(l,s[c]);return{props:l}}return o&&(e=de(o,a()),e.$on("routeEvent",t[7])),{c(){e&&z(e.$$.fragment),n=we()},m(r,l){e&&H(e,r,l),P(r,n,l),i=!0},p(r,l){const c=l&4?Ve(s,[Ze(r[2])]):{};if(o!==(o=r[0])){if(e){ie();const u=e;A(u.$$.fragment,1,0,()=>{G(u,1)}),se()}o?(e=de(o,a()),e.$on("routeEvent",r[7]),z(e.$$.fragment),M(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(r){i||(e&&M(e.$$.fragment,r),i=!0)},o(r){e&&A(e.$$.fragment,r),i=!1},d(r){r&&T(n),e&&G(e,r)}}}function $n(t){let e,n,i;const s=[{params:t[1]},t[2]];var o=t[0];function a(r){let l={};for(let c=0;c<s.length;c+=1)l=fe(l,s[c]);return{props:l}}return o&&(e=de(o,a()),e.$on("routeEvent",t[6])),{c(){e&&z(e.$$.fragment),n=we()},m(r,l){e&&H(e,r,l),P(r,n,l),i=!0},p(r,l){const c=l&6?Ve(s,[l&2&&{params:r[1]},l&4&&Ze(r[2])]):{};if(o!==(o=r[0])){if(e){ie();const u=e;A(u.$$.fragment,1,0,()=>{G(u,1)}),se()}o?(e=de(o,a()),e.$on("routeEvent",r[6]),z(e.$$.fragment),M(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(r){i||(e&&M(e.$$.fragment,r),i=!0)},o(r){e&&A(e.$$.fragment,r),i=!1},d(r){r&&T(n),e&&G(e,r)}}}function Tn(t){let e,n,i,s;const o=[$n,En],a=[];function r(l,c){return l[1]?0:1}return e=r(t),n=a[e]=o[e](t),{c(){n.c(),i=we()},m(l,c){a[e].m(l,c),P(l,i,c),s=!0},p(l,[c]){let u=e;e=r(l),e===u?a[e].p(l,c):(ie(),A(a[u],1,1,()=>{a[u]=null}),se(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),M(n,1),n.m(i.parentNode,i))},i(l){s||(M(n),s=!0)},o(l){A(n),s=!1},d(l){a[e].d(l),l&&T(i)}}}function ct(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let i="";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const Qe=Ot(null,function(e){e(ct());const n=()=>{e(ct())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});jt(Qe,t=>t.location);jt(Qe,t=>t.querystring);const ut=ee(void 0);async function le(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await St(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Ln(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function xn(t,e,n){let{routes:i={}}=e,{prefix:s=""}=e,{restoreScrollState:o=!1}=e;class a{constructor(p,g){if(!g||typeof g!="function"&&(typeof g!="object"||g._sveltesparouter!==!0))throw Error("Invalid component object");if(!p||typeof p=="string"&&(p.length<1||p.charAt(0)!="/"&&p.charAt(0)!="*")||typeof p=="object"&&!(p instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:C,keys:E}=Bn(p);this.path=p,typeof g=="object"&&g._sveltesparouter===!0?(this.component=g.component,this.conditions=g.conditions||[],this.userData=g.userData,this.props=g.props||{}):(this.component=()=>Promise.resolve(g),this.conditions=[],this.props={}),this._pattern=C,this._keys=E}match(p){if(s){if(typeof s=="string")if(p.startsWith(s))p=p.substr(s.length)||"/";else return null;else if(s instanceof RegExp){const x=p.match(s);if(x&&x[0])p=p.substr(x[0].length)||"/";else return null}}const g=this._pattern.exec(p);if(g===null)return null;if(this._keys===!1)return g;const C={};let E=0;for(;E<this._keys.length;){try{C[this._keys[E]]=decodeURIComponent(g[E+1]||"")||null}catch{C[this._keys[E]]=null}E++}return C}async checkConditions(p){for(let g=0;g<this.conditions.length;g++)if(!await this.conditions[g](p))return!1;return!0}}const r=[];i instanceof Map?i.forEach((k,p)=>{r.push(new a(p,k))}):Object.keys(i).forEach(k=>{r.push(new a(k,i[k]))});let l=null,c=null,u={};const d=Je();async function h(k,p){await St(),d(k,p)}let f=null,m=null;o&&(m=k=>{k.state&&(k.state.__svelte_spa_router_scrollY||k.state.__svelte_spa_router_scrollX)?f=k.state:f=null},window.addEventListener("popstate",m),pn(()=>{Ln(f)}));let y=null,w=null;const $=Qe.subscribe(async k=>{y=k;let p=0;for(;p<r.length;){const g=r[p].match(k.location);if(!g){p++;continue}const C={route:r[p].path,location:k.location,querystring:k.querystring,userData:r[p].userData,params:g&&typeof g=="object"&&Object.keys(g).length?g:null};if(!await r[p].checkConditions(C)){n(0,l=null),w=null,h("conditionsFailed",C);return}h("routeLoading",Object.assign({},C));const E=r[p].component;if(w!=E){E.loading?(n(0,l=E.loading),w=E,n(1,c=E.loadingParams),n(2,u={}),h("routeLoaded",Object.assign({},C,{component:l,name:l.name,params:c}))):(n(0,l=null),w=null);const x=await E();if(k!=y)return;n(0,l=x&&x.default||x),w=E}g&&typeof g=="object"&&Object.keys(g).length?n(1,c=g):n(1,c=null),n(2,u=r[p].props),h("routeLoaded",Object.assign({},C,{component:l,name:l.name,params:c})).then(()=>{ut.set(c)});return}n(0,l=null),w=null,ut.set(void 0)});ke(()=>{$(),m&&window.removeEventListener("popstate",m)});function L(k){ze.call(this,t,k)}function b(k){ze.call(this,t,k)}return t.$$set=k=>{"routes"in k&&n(3,i=k.routes),"prefix"in k&&n(4,s=k.prefix),"restoreScrollState"in k&&n(5,o=k.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[l,c,u,i,s,o,L,b]}class Pn extends W{constructor(e){super(),U(this,e,xn,Tn,F,{routes:3,prefix:4,restoreScrollState:5})}}class Ht{constructor(e){D(this,"_difficulty");D(this,"_cacheData");this._difficulty=e,this._cacheData=[]}set difficulty(e){this._difficulty=e}get cacheData(){return[...this._cacheData]}appendData(e){this._cacheData.push(e)}readCache(){const e=window.localStorage.getItem(this._difficulty);return e===null?!1:(this._cacheData=JSON.parse(e),!0)}writeCache(){console.log(`[DEBUG]: cache written - {${this._difficulty}: ${JSON.stringify(this._cacheData)}}`),window.localStorage.setItem(this._difficulty,JSON.stringify(this._cacheData))}clearCache(){this._cacheData=[],window.localStorage.removeItem(this._difficulty)}}const De={easy:"Ľahká",hard:"Ťažká"},ft=[{id:"easy",text:De.easy},{id:"hard",text:De.hard}];var ne={},Cn={get exports(){return ne},set exports(t){ne=t}};Cn.exports=et;ne.isMobile=et;ne.default=et;const In=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Sn=/CrOS/,Dn=/android|ipad|playbook|silk/i;function et(t){t||(t={});let e=t.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;let n=In.test(e)&&!Sn.test(e)||!!t.tablet&&Dn.test(e);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(n=!0),n}function Gt(t){const e=t-1;return e*e*e+1}function Mn(t,{delay:e=0,duration:n=400,easing:i=me}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*s}`}}function An(t,{delay:e=0,duration:n=400,easing:i=Gt,x:s=0,y:o=0,opacity:a=0}={}){const r=getComputedStyle(t),l=+r.opacity,c=r.transform==="none"?"":r.transform,u=l*(1-a);return{delay:e,duration:n,easing:i,css:(d,h)=>`
			transform: ${c} translate(${(1-d)*s}px, ${(1-d)*o}px);
			opacity: ${l-u*h}`}}function On(t,{from:e,to:n},i={}){const s=getComputedStyle(t),o=s.transform==="none"?"":s.transform,[a,r]=s.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*a/n.width-(n.left+a),c=e.top+e.height*r/n.height-(n.top+r),{delay:u=0,duration:d=f=>Math.sqrt(f)*120,easing:h=Gt}=i;return{delay:u,duration:pe(d)?d(Math.sqrt(l*l+c*c)):d,easing:h,css:(f,m)=>{const y=m*l,w=m*c,$=f+m*e.width/n.width,L=f+m*e.height/n.height;return`transform: ${o} translate(${y}px, ${w}px) scale(${$}, ${L});`}}}const jn={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Hn=()=>{const{subscribe:t,update:e}=ee([]);let n=0;const i={},s=c=>c instanceof Object;return{subscribe:t,push:(c,u={})=>{const d={target:"default",...s(c)?c:{...u,msg:c}},h=i[d.target]||{},f={...jn,...h,...d,theme:{...h.theme,...d.theme},classes:[...h.classes||[],...d.classes||[]],id:++n};return e(m=>f.reversed?[...m,f]:[f,...m]),n},pop:c=>{e(u=>{if(!u.length||c===0)return[];if(s(c))return u.filter(h=>c(h));const d=c||Math.max(...u.map(h=>h.id));return u.filter(h=>h.id!==d)})},set:(c,u={})=>{const d=s(c)?{...c}:{...u,id:c};e(h=>{const f=h.findIndex(m=>m.id===d.id);return f>-1&&(h[f]={...h[f],...d}),h})},_init:(c="default",u={})=>(i[c]=u,i)}},he=Hn();function dt(t){return Object.prototype.toString.call(t)==="[object Date]"}function Fe(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((s,o)=>Fe(t[o],s));return s=>i.map(o=>o(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(dt(t)&&dt(e)){t=t.getTime(),e=e.getTime();const o=e-t;return a=>new Date(t+a*o)}const i=Object.keys(e),s={};return i.forEach(o=>{s[o]=Fe(t[o],e[o])}),o=>{const a={};return i.forEach(r=>{a[r]=s[r](o)}),a}}if(n==="number"){const i=e-t;return s=>t+s*i}throw new Error(`Cannot interpolate ${n} values`)}function Gn(t,e={}){const n=ee(t);let i,s=t;function o(a,r){if(t==null)return n.set(t=a),Promise.resolve();s=a;let l=i,c=!1,{delay:u=0,duration:d=400,easing:h=me,interpolate:f=Fe}=fe(fe({},e),r);if(d===0)return l&&(l.abort(),l=null),n.set(t=s),Promise.resolve();const m=Oe()+u;let y;return i=je(w=>{if(w<m)return!0;c||(y=f(t,a),typeof d=="function"&&(d=d(t,a)),c=!0),l&&(l.abort(),l=null);const $=w-m;return $>d?(n.set(t=a),!1):(n.set(t=y(h($/d))),!0)}),i.promise}return{set:o,update:(a,r)=>o(a(s,t),r),subscribe:n.subscribe}}function zn(t){let e,n=t[0].msg+"",i;return{c(){e=new cn(!1),i=we(),e.a=i},m(s,o){e.m(n,s,o),P(s,i,o)},p(s,o){o&1&&n!==(n=s[0].msg+"")&&e.p(n)},i:I,o:I,d(s){s&&T(i),s&&e.d()}}}function Nn(t){let e,n,i;const s=[t[2]];var o=t[0].component.src;function a(r){let l={};for(let c=0;c<s.length;c+=1)l=fe(l,s[c]);return{props:l}}return o&&(e=de(o,a())),{c(){e&&z(e.$$.fragment),n=we()},m(r,l){e&&H(e,r,l),P(r,n,l),i=!0},p(r,l){const c=l&4?Ve(s,[Ze(r[2])]):{};if(o!==(o=r[0].component.src)){if(e){ie();const u=e;A(u.$$.fragment,1,0,()=>{G(u,1)}),se()}o?(e=de(o,a()),z(e.$$.fragment),M(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(r){i||(e&&M(e.$$.fragment,r),i=!0)},o(r){e&&A(e.$$.fragment,r),i=!1},d(r){r&&T(n),e&&G(e,r)}}}function ht(t){let e,n,i;return{c(){e=B("div"),_(e,"class","_toastBtn pe svelte-l65oht"),_(e,"role","button"),_(e,"tabindex","0")},m(s,o){P(s,e,o),n||(i=[N(e,"click",t[4]),N(e,"keydown",t[8])],n=!0)},p:I,d(s){s&&T(e),n=!1,Y(i)}}}function Rn(t){let e,n,i,s,o,a,r,l,c,u;const d=[Nn,zn],h=[];function f(y,w){return y[0].component?0:1}i=f(t),s=h[i]=d[i](t);let m=t[0].dismissable&&ht(t);return{c(){e=B("div"),n=B("div"),s.c(),o=S(),m&&m.c(),a=S(),r=B("progress"),_(n,"role","status"),_(n,"class","_toastMsg svelte-l65oht"),re(n,"pe",t[0].component),_(r,"class","_toastBar svelte-l65oht"),r.value=t[1],_(e,"class","_toastItem svelte-l65oht"),re(e,"pe",t[0].pausable)},m(y,w){P(y,e,w),v(e,n),h[i].m(n,null),v(e,o),m&&m.m(e,null),v(e,a),v(e,r),l=!0,c||(u=[N(e,"mouseenter",t[9]),N(e,"mouseleave",t[6])],c=!0)},p(y,[w]){let $=i;i=f(y),i===$?h[i].p(y,w):(ie(),A(h[$],1,1,()=>{h[$]=null}),se(),s=h[i],s?s.p(y,w):(s=h[i]=d[i](y),s.c()),M(s,1),s.m(n,null)),(!l||w&1)&&re(n,"pe",y[0].component),y[0].dismissable?m?m.p(y,w):(m=ht(y),m.c(),m.m(e,a)):m&&(m.d(1),m=null),(!l||w&2)&&(r.value=y[1]),(!l||w&1)&&re(e,"pe",y[0].pausable)},i(y){l||(M(s),l=!0)},o(y){A(s),l=!1},d(y){y&&T(e),h[i].d(),m&&m.d(),c=!1,Y(u)}}}function Fn(t,e,n){let i,{item:s}=e;const o=Gn(s.initial,{duration:s.duration,easing:me});Xe(t,o,b=>n(1,i=b));const a=()=>he.pop(s.id),r=()=>{(i===1||i===0)&&a()};let l=s.initial,c=l,u=!1;const d=()=>{!u&&i!==l&&(o.set(i,{duration:0}),u=!0)},h=()=>{if(u){const b=s.duration,k=b-b*((i-c)/(l-c));o.set(l,{duration:k}).then(r),u=!1}};let f={};const m=(b,k="undefined")=>typeof b===k;let y;Pt((b=document)=>{if(m(b.hidden))return;const k=()=>b.hidden?d():h(),p="visibilitychange";b.addEventListener(p,k),y=()=>b.removeEventListener(p,k),k()}),ke(()=>{m(s.onpop,"function")&&s.onpop(s.id),y&&y()});const $=b=>{b instanceof KeyboardEvent&&["Enter"," "].includes(b.key)&&a()},L=()=>{s.pausable&&d()};return t.$$set=b=>{"item"in b&&n(0,s=b.item)},t.$$.update=()=>{if(t.$$.dirty&1&&(m(s.progress)||n(0,s.next=s.progress,s)),t.$$.dirty&131&&l!==s.next&&(n(7,l=s.next),c=i,u=!1,o.set(l).then(r)),t.$$.dirty&1&&s.component){const{props:b={},sendIdTo:k}=s.component;n(2,f={...b,...k&&{[k]:s.id}})}},[s,i,f,o,a,d,h,l,$,L]}class qn extends W{constructor(e){super(),U(this,e,Fn,Rn,F,{item:0})}}function mt(t,e,n){const i=t.slice();return i[5]=e[n],i}function pt(t,e){let n,i,s,o,a,r,l,c,u=I,d;return i=new qn({props:{item:e[5]}}),{key:t,first:null,c(){n=B("li"),z(i.$$.fragment),s=S(),_(n,"class",o=rt(e[5].classes.join(" "))+" svelte-yh90az"),_(n,"style",a=e[1](e[5].theme)),this.first=n},m(h,f){P(h,n,f),H(i,n,null),v(n,s),d=!0},p(h,f){e=h;const m={};f&1&&(m.item=e[5]),i.$set(m),(!d||f&1&&o!==(o=rt(e[5].classes.join(" "))+" svelte-yh90az"))&&_(n,"class",o),(!d||f&1&&a!==(a=e[1](e[5].theme)))&&_(n,"style",a)},r(){c=n.getBoundingClientRect()},f(){mn(n),u(),xt(n,c)},a(){u(),u=hn(n,c,On,{duration:200})},i(h){d||(M(i.$$.fragment,h),te(()=>{l&&l.end(1),r=gn(n,An,e[5].intro),r.start()}),d=!0)},o(h){A(i.$$.fragment,h),r&&r.invalidate(),l=vn(n,Mn,{}),d=!1},d(h){h&&T(n),G(i),h&&l&&l.end()}}}function Un(t){let e,n=[],i=new Map,s,o=t[0];const a=r=>r[5].id;for(let r=0;r<o.length;r+=1){let l=mt(t,o,r),c=a(l);i.set(c,n[r]=pt(c,l))}return{c(){e=B("ul");for(let r=0;r<n.length;r+=1)n[r].c();_(e,"class","_toastContainer svelte-yh90az")},m(r,l){P(r,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);s=!0},p(r,[l]){if(l&3){o=r[0],ie();for(let c=0;c<n.length;c+=1)n[c].r();n=wn(n,l,a,1,r,o,i,e,yn,pt,null,mt);for(let c=0;c<n.length;c+=1)n[c].a();se()}},i(r){if(!s){for(let l=0;l<o.length;l+=1)M(n[l]);s=!0}},o(r){for(let l=0;l<n.length;l+=1)A(n[l]);s=!1},d(r){r&&T(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Wn(t,e,n){let i;Xe(t,he,l=>n(4,i=l));let{options:s={}}=e,{target:o="default"}=e,a;const r=l=>Object.keys(l).reduce((c,u)=>`${c}${u}:${l[u]};`,"");return t.$$set=l=>{"options"in l&&n(2,s=l.options),"target"in l&&n(3,o=l.target)},t.$$.update=()=>{t.$$.dirty&12&&he._init(o,s),t.$$.dirty&24&&n(0,a=i.filter(l=>l.target===o))},[a,r,s,o,i]}class Xn extends W{constructor(e){super(),U(this,e,Wn,Un,F,{options:2,target:3})}}function _t(t,e,n){const i=t.slice();return i[7]=e[n],i}function Yn(t){let e;return{c(){e=R("Začat novú hru")},m(n,i){P(n,e,i)},d(n){n&&T(e)}}}function Kn(t){let e;return{c(){e=R("Pokračovať v hre")},m(n,i){P(n,e,i)},d(n){n&&T(e)}}}function gt(t){let e,n=t[7].text+"",i,s;return{c(){e=B("option"),i=R(n),s=S(),e.__value=t[7].id,e.value=e.__value},m(o,a){P(o,e,a),v(e,i),v(e,s)},p:I,d(o){o&&T(e)}}}function Jn(t){let e,n,i,s,o,a,r,l,c,u,d,h,f;function m(b,k){return b[1]?Kn:Yn}let y=m(t),w=y(t),$=ft,L=[];for(let b=0;b<$.length;b+=1)L[b]=gt(_t(t,$,b));return{c(){e=B("main"),n=B("h1"),n.textContent="Puzzle Path",i=S(),s=B("button"),w.c(),o=S(),a=B("div"),r=B("label"),r.textContent="Obtiažnosť",l=S(),c=B("select");for(let b=0;b<L.length;b+=1)L[b].c();u=S(),d=B("button"),d.textContent="Popis hry",_(n,"class","svelte-haoa11"),_(s,"class","button-theme svelte-haoa11"),_(r,"for","difficulty-select"),_(r,"class","svelte-haoa11"),_(c,"class","select-theme svelte-haoa11"),_(c,"id","difficulty-select"),t[0]===void 0&&te(()=>t[4].call(c)),_(a,"class","select-n-label svelte-haoa11"),_(d,"class","button-theme svelte-haoa11"),_(e,"class","page-container svelte-haoa11")},m(b,k){P(b,e,k),v(e,n),v(e,i),v(e,s),w.m(s,null),v(e,o),v(e,a),v(a,r),v(a,l),v(a,c);for(let p=0;p<L.length;p+=1)L[p].m(c,null);lt(c,t[0]),v(e,u),v(e,d),h||(f=[N(s,"click",t[2]),N(c,"change",t[4]),N(c,"change",t[3]),N(d,"click",t[5])],h=!0)},p(b,[k]){if(y!==(y=m(b))&&(w.d(1),w=y(b),w&&(w.c(),w.m(s,null))),k&0){$=ft;let p;for(p=0;p<$.length;p+=1){const g=_t(b,$,p);L[p]?L[p].p(g,k):(L[p]=gt(g),L[p].c(),L[p].m(c,null))}for(;p<L.length;p+=1)L[p].d(1);L.length=$.length}k&1&&lt(c,b[0])},i:I,o:I,d(b){b&&T(e),w.d(),on(L,b),h=!1,Y(f)}}}async function Vn(){return document.fullscreenElement||await document.documentElement.requestFullscreen(),await screen.orientation.lock("portrait")}function Zn(t,e,n){let i="easy",s;const o=new Ht(i);s=o.readCache();function a(){const u={duration:5e3,theme:{"--toastBarBackground":"#dd571c"}};ne()?Vn().then(()=>{console.log("Screen locked to portrait."),le(`/game/${i}`)}).catch(d=>{console.error(`Failed locking the screen to portrait: ${d}`),he.push("Nepodarilo sa uzamknúť obrazovku na výšku! S loptičkou sa bude otáčať obrazovka.",u),le(`/game/${i}`)}):le(`/game/${i}`)}function r(){o.difficulty=i,n(1,s=o.readCache())}function l(){i=an(this),n(0,i)}return[i,s,a,r,l,()=>le("/description")]}class Qn extends W{constructor(e){super(),U(this,e,Zn,Jn,F,{})}}function ei(t){let e;return{c(){e=B("div"),e.innerHTML='<div class="loader svelte-19oyu9t"></div>',_(e,"class","loader-container svelte-19oyu9t")},m(n,i){P(n,e,i)},p:I,i:I,o:I,d(n){n&&T(e)}}}class ti extends W{constructor(e){super(),U(this,e,null,ei,F,{})}}const ue=ee();var ae=(t=>(t.BallRoll="BALL_ROLL",t.EditBoard="EDIT_BOARD",t))(ae||{});const be=ee({isDisabled:!0,buttonAction:"BALL_ROLL"});function ni(t){let e,n,i=t[1].backToMenuButton+"",s,o,a,r,l;function c(h,f){return h[0]?oi:si}let u=c(t),d=u(t);return{c(){e=B("div"),n=B("button"),s=R(i),o=S(),a=B("button"),d.c(),_(n,"class","button-theme svelte-1pnhy83"),_(a,"class","button-theme svelte-1pnhy83"),_(e,"class","buttons-multiple svelte-1pnhy83")},m(h,f){P(h,e,f),v(e,n),v(n,s),v(e,o),v(e,a),d.m(a,null),r||(l=[N(n,"click",t[7]),N(a,"click",t[8])],r=!0)},p(h,f){f&2&&i!==(i=h[1].backToMenuButton+"")&&Q(s,i),u===(u=c(h))&&d?d.p(h,f):(d.d(1),d=u(h),d&&(d.c(),d.m(a,null)))},d(h){h&&T(e),d.d(),r=!1,Y(l)}}}function ii(t){let e,n,i,s,o;return{c(){e=B("button"),n=R(t[3]),_(e,"class","button-theme svelte-1pnhy83"),e.disabled=i=t[4].isDisabled},m(a,r){P(a,e,r),v(e,n),s||(o=N(e,"click",t[6]),s=!0)},p(a,r){r&8&&Q(n,a[3]),r&16&&i!==(i=a[4].isDisabled)&&(e.disabled=i)},d(a){a&&T(e),s=!1,o()}}}function si(t){let e=t[1].nextLevelButton.levelFinished+"",n;return{c(){n=R(e)},m(i,s){P(i,n,s)},p(i,s){s&2&&e!==(e=i[1].nextLevelButton.levelFinished+"")&&Q(n,e)},d(i){i&&T(n)}}}function oi(t){let e=t[1].nextLevelButton.difficultyFinished+"",n;return{c(){n=R(e)},m(i,s){P(i,n,s)},p(i,s){s&2&&e!==(e=i[1].nextLevelButton.difficultyFinished+"")&&Q(n,e)},d(i){i&&T(n)}}}function ri(t){let e;function n(o,a){return o[2]?ii:ni}let i=n(t),s=i(t);return{c(){e=B("div"),s.c(),_(e,"class","controls-container svelte-1pnhy83")},m(o,a){P(o,e,a),s.m(e,null)},p(o,[a]){i===(i=n(o))&&s?s.p(o,a):(s.d(1),s=i(o),s&&(s.c(),s.m(e,null)))},i:I,o:I,d(o){o&&T(e),s.d()}}}function li(t,e,n){let i;Xe(t,be,h=>n(4,i=h));let{isLevelLast:s}=e;const o=Je(),a={mainButton:{},backToMenuButton:"Späť na hlavné menu",nextLevelButton:{levelFinished:"Ďalšia úloha",difficultyFinished:"Opakovať obtiažnosť"}};a.mainButton[ae.BallRoll]="Položiť loptičku",a.mainButton[ae.EditBoard]="Editovať";let r,l;be.subscribe(h=>{n(3,l=a.mainButton[h.buttonAction])}),ue.subscribe(h=>{h?n(2,r=!h.isFinished):n(2,r=!0)});const c=()=>{const h=Vt(ue).isTileMovementEnabled;ue.update(f=>(f.isTileMovementEnabled=!h,f)),be.update(f=>(f.buttonAction=h?ae.EditBoard:ae.BallRoll,f))},u=()=>{le("/")};ke(()=>{console.log("GameControlsComponent: Destroyed")});const d=()=>o("nextlevel");return t.$$set=h=>{"isLevelLast"in h&&n(0,s=h.isLevelLast)},[s,a,r,l,i,o,c,u,d]}class ai extends W{constructor(e){super(),U(this,e,li,ri,F,{isLevelLast:0})}}class V{constructor(e,n){D(this,"_x");D(this,"_y");this._x=e,this._y=n}get x(){return this._x}get y(){return this._y}copy(){return new V(this._x,this._y)}set(e,n){return this._x=e,this._y=n,this}add(e){return this._x+=e.x,this._y+=e.y,this}multiply(e){return this._x*=e,this._y*=e,this}divide(e){return this._x/=e,this._y/=e,this}equals(e){return this._x===e.x&&this._y===e.y}static addVecs(e,n){return new V(e.x+n.x,e.y+n.y)}}function ci(t,e){return t.filter(n=>!e.includes(n))}const ui=()=>{const{subscribe:t,update:e}=ee();return{subscribe:t,highlight:(s,o,a)=>{e(r=>({position:s,color:o,duration:a}))},cancel:()=>{e(s=>({position:new V(0,0),color:"tranparent",duration:0}))}}},Me=ui();function fi(t){let e;return{c(){e=B("div"),_(e,"style",t[0]),_(e,"class","highlighter svelte-wifwsx")},m(n,i){P(n,e,i)},p(n,[i]){i&1&&_(e,"style",n[0])},i:I,o:I,d(n){n&&T(e)}}}function di(t,e,n){let i,{tileDimensions:s}=e,o=null;const a={"tile-size":s+"px","top-pos":"0","left-pos":"0","highlight-color":"none"};return Me.subscribe(r=>{const l=document.querySelector("div.highlighter");r&&l&&(o!==null&&clearTimeout(o),n(2,a["left-pos"]=r.position.x+"px",a),n(2,a["top-pos"]=r.position.y+"px",a),n(2,a["highlight-color"]=r.color,a),l.classList.add("tilelight"),o=setTimeout(()=>{o=null,l.classList.remove("tilelight")},r.duration))}),t.$$set=r=>{"tileDimensions"in r&&n(1,s=r.tileDimensions)},t.$$.update=()=>{t.$$.dirty&4&&n(0,i=Object.entries(a).map(([r,l])=>`--${r}:${l}`).join(";"))},[i,s,a]}class hi extends W{constructor(e){super(),U(this,e,di,fi,F,{tileDimensions:1})}}class mi{constructor(e,n,i){D(this,"_board");D(this,"_gameBoardElement");D(this,"_ballTile");D(this,"_position");this._board=e,this._gameBoardElement=n,this._ballTile=i,this._position=new V(0,0),i.style.position="absolute"}placeBallAtStart(){const e=this._board.startIndexPosition.multiply(this._ballTile.width);this._position=e,this._gameBoardElement.appendChild(this._ballTile),this.updateBallPositionInDOM()}removeBallFromBoard(){this._ballTile.remove()}isInFinish(){return this._position.copy().divide(this._ballTile.width).equals(this._board.finishIndexPosition)}moveBall(e){const n=this._ballTile.width,i=n*(this._board.gameBoardSize-1),s=new V(0,0);switch(e){case q.UP:s.set(0,-n);break;case q.DOWN:s.set(0,n);break;case q.LEFT:s.set(-n,0);break;case q.RIGHT:s.set(n,0);break}const o=V.addVecs(this._position,s);if(o.x<0||o.x>i||o.y<0||o.y>i)return;const a=this._position.copy().divide(this._ballTile.width);if(!this._board.getGameBoardItem(a.x,a.y).boundary.getBoundaryByDirection(e))return;const c=o.copy().divide(this._ballTile.width);this._board.getGameBoardItem(c.x,c.y).boundary.getBoundaryByDirection(pi(e))&&(this._position.add(s),this.updateBallPositionInDOM())}updateBallPositionInDOM(){this._ballTile.style.left=`${this._position.x}px`,this._ballTile.style.top=`${this._position.y}px`}}var q=(t=>(t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t))(q||{});function pi(t){switch(t){case"UP":return"DOWN";case"DOWN":return"UP";case"LEFT":return"RIGHT";case"RIGHT":return"LEFT"}}function qe(t,e){return new KeyboardEvent(t,{bubbles:!0,cancelable:!0,code:e})}function _i(){window.deviceorientaitonratecounts={up:null,down:null,left:null,right:null},window.addEventListener("deviceorientation",zt)}function zt(t){const e=t.beta,n=t.gamma,i=30,s=20;if(e>i+30)$e("ArrowDown","down",s);else if(e<-i+30)$e("ArrowUp","up",s);else if(n>i)$e("ArrowRight","right",s);else if(n<-i)$e("ArrowLeft","left",s);else{const o=qe("keyup","NeutralTilt");document.dispatchEvent(o)}}function $e(t,e,n){if(window.deviceorientaitonratecounts[e]===null){window.deviceorientaitonratecounts[e]=0;const i=qe("keydown",t);document.dispatchEvent(i)}else{if(gi(e),++window.deviceorientaitonratecounts[e]<=n)return;window.deviceorientaitonratecounts[e]=0;const i=qe("keydown",t);document.dispatchEvent(i)}}function gi(t){t!=="up"&&(window.deviceorientaitonratecounts.up=null),t!=="down"&&(window.deviceorientaitonratecounts.down=null),t!=="left"&&(window.deviceorientaitonratecounts.left=null),t!=="right"&&(window.deviceorientaitonratecounts.right=null)}function vi(t){_i();const e=n=>{if(!n.repeat){switch(n.code){case"ArrowUp":t.moveBall(q.UP),n.preventDefault();break;case"ArrowDown":t.moveBall(q.DOWN),n.preventDefault();break;case"ArrowRight":t.moveBall(q.RIGHT),n.preventDefault();break;case"ArrowLeft":t.moveBall(q.LEFT),n.preventDefault();break}t.isInFinish()&&(window.removeEventListener("keydown",e),ue.update(i=>(i.isFinished=!0,i.isTileMovementEnabled=!1,i)))}};window.addEventListener("keydown",e)}function bi(t){yi(t),wi(t)}function yi(t){for(let e=0;e<t.gameBoardSize;e++)for(let n=0;n<t.gameBoardSize;n++){const i=t.getGameBoardItem(n,e);if(i.isMovable()){const s=i.tileHTMLElement;s.onmousedown=o=>{vt(o,t)}}}for(let e=0;e<t.pickBoardSize;e++){const n=t.getPickBoardItem(e);if(n.isMovable()){const i=n.tileHTMLElement;i.onmousedown=s=>{vt(s,t)}}}}function wi(t){for(let e=0;e<t.gameBoardSize;e++)for(let n=0;n<t.gameBoardSize;n++){const i=t.getGameBoardItem(n,e);if(i.isMovable()){const s=i.tileHTMLElement;s.ontouchstart=o=>{bt(o,t)}}}for(let e=0;e<t.pickBoardSize;e++){const n=t.getPickBoardItem(e);if(n.isMovable()){const i=n.tileHTMLElement;i.ontouchstart=s=>{bt(s,t)}}}}function Ae(t,e){let n,i;if(e instanceof MouseEvent){const s=e;n=s.pageX,i=s.pageY}else if(e instanceof TouchEvent){const o=e.changedTouches[0];n=o.pageX,i=o.pageY}else console.warn(`Controls: Not supported event type [${e}}]`);t.style.left=n-t.offsetWidth/2+"px",t.style.top=i-t.offsetHeight/2+"px"}function Nt(t){const e=t.cloneNode();return e.removeAttribute("id"),e.style.position="absolute",e.style.opacity="0.5",e.style.cursor="grabbing",e.ondragstart=()=>!1,t.getAttribute("id").length===1&&(t.style.visibility="hidden"),e}function vt(t,e){const n=t.target,i=Nt(n);document.body.appendChild(i),Ae(i,t);let s=null;function o(a){Ae(i,a),i.hidden=!0;let r=document.elementFromPoint(a.clientX,a.clientY);if(i.hidden=!1,!r)return;let l=r.closest(".dropzone");s!=l&&(s&&qt(s),s=l,s&&Ft(s))}document.addEventListener("mousemove",o),i.onmouseup=function(){document.removeEventListener("mousemove",o),i.onmouseup=null,n.getAttribute("id").length===1&&(n.style.visibility="visible"),i.remove(),Rt(s,n,e)}}function bt(t,e){const n=t.target,i=Nt(n);document.body.appendChild(i),Ae(i,t);let s=null;function o(a){Ae(i,a);const r=a.changedTouches[0];i.hidden=!0;let l=document.elementFromPoint(r.clientX,r.clientY);if(i.hidden=!1,!l)return;let c=l.closest(".dropzone");s!=c&&(s&&qt(s),s=c,s&&Ft(s))}document.addEventListener("touchmove",o),n.ontouchend=function(){document.removeEventListener("touchmove",o),n.ontouchend=null,n.getAttribute("id").length===1&&(n.style.visibility="visible"),i.remove(),Rt(s,n,e)}}function Rt(t,e,n){if(!t)return;const i=t.getAttribute("id"),s=e.getAttribute("id");t.setAttribute("id",s),e.setAttribute("id",i),t.classList.remove("dropzone-hover"),e.classList.remove("dropzone-hover"),ki(t,e),n.replaceTiles(i,s),be.update(o=>(o.isDisabled=n.isEmptyFieldOnBoard(),o))}function ki(t,e){let n=e.nextElementSibling;const i=e.parentNode;if(t.replaceWith(e),n!==null&&n.isEqualNode(t)){i.insertBefore(t,e);return}i.insertBefore(t,n)}function Ft(t){t.classList.add("dropzone-hover")}function qt(t){t.classList.remove("dropzone-hover")}class Bi{constructor(e,n=0){D(this,"_boundary");if(e.length!=4)throw"TileBoundary Error: array of boundaries must have length 4";this._boundary=[...e],this.rotateClockwise(n)}get boundary(){return this._boundary}get topBoundary(){return this._boundary[0]}get rightBoundary(){return this._boundary[1]}get bottomBoundary(){return this._boundary[2]}get leftBoundary(){return this._boundary[3]}getBoundaryByDirection(e){switch(e){case q.UP:return this.topBoundary;case q.DOWN:return this.bottomBoundary;case q.LEFT:return this.leftBoundary;case q.RIGHT:return this.rightBoundary}}rotateClockwise(e){e=e%360;const n=Math.floor(e/90);for(let i=0;i<n;i++){const s=this._boundary.pop();this._boundary.unshift(s)}}}class yt{constructor(e,n,i,s,o){D(this,"_tile");D(this,"_orientation");D(this,"tileProps");D(this,"_postponedEvents");D(this,"_postponedCssClasses");D(this,"_name");D(this,"_bondary");this._orientation=n,this.tileProps=i,this._tile=e,this._postponedEvents={},this._postponedCssClasses=[],this._name=s,this._bondary=new Bi(o,n),this.initializeTile()}get boundary(){return this._bondary}get name(){return this._name}get orientation(){return this._orientation}get tileHTMLElement(){return this._tile}isMovable(){return this.tileProps.movable}isEmpty(){return this._name==="none"}disableMovementEventListeners(){this._tile.onmousedown!==null&&(this._postponedEvents.onmousedown=this._tile.onmousedown,this._tile.onmousedown=null),this._tile.ontouchstart!==null&&(this._postponedEvents.ontouchstart=this._tile.ontouchstart,this._tile.ontouchstart=null),[...this._tile.classList].forEach(e=>{this._tile.classList.remove(e),this._postponedCssClasses.push(e)})}enableMovementEventListeners(){const e=this._postponedEvents.onmousedown,n=this._postponedEvents.ontouchstart;e&&(this._tile.onmousedown=e),n&&(this._tile.ontouchstart=n),this._tile.classList.add(...this._postponedCssClasses),this._postponedCssClasses=[]}initializeTile(){this._tile.style.transform=`rotate(${this._orientation}deg)`,this.isMovable()&&this._tile.classList.add("draggable"),this.tileProps.receiver&&this._tile.classList.add("dropzone"),this._tile.ondragstart=()=>!1}}var K=(t=>(t.Game="GAME",t.Pick="PICK",t))(K||{});class Ei{constructor(e,n,i){D(this,"_gameBoardSize");D(this,"_pickBoardSize");D(this,"_gameBoardPositions");D(this,"_gameBoard");D(this,"_pickBoard");this._gameBoardSize=e,this._pickBoardSize=n,this._pickBoard=new Array(n),this._gameBoard=new Array(e),this._gameBoardPositions=i;for(let s=0;s<e;s++)this._gameBoard[s]=new Array(e)}get gameBoardSize(){return this._gameBoardSize}get pickBoardSize(){return this._pickBoardSize}get startIndexPosition(){return this._gameBoardPositions.start.copy()}get finishIndexPosition(){return this._gameBoardPositions.finish.copy()}setGameBoardItem(e,n,i){n<0||i<0||n>this._gameBoardSize||i>this._gameBoardSize||(this._gameBoard[i][n]=e)}setPickBoardItem(e,n){n>this._pickBoard.length||(this._pickBoard[n]=e)}getGameBoardItem(e,n){return e<0||n<0||e>this._gameBoardSize||n>this._gameBoardSize?null:this._gameBoard[n][e]}getPickBoardItem(e){if(!(e>this._pickBoard.length))return this._pickBoard[e]}populateGameBoardContainer(e){for(let n=0;n<this.gameBoardSize;n++)for(let i=0;i<this.gameBoardSize;i++){const s=this.getGameBoardItem(i,n);e.appendChild(s.tileHTMLElement)}}populatePickBoardContainer(e){for(let n=0;n<this.pickBoardSize;n++){const i=this.getPickBoardItem(n);e.appendChild(i.tileHTMLElement)}}replaceTiles(e,n){const i=this.decodeTileId(e),s=this.decodeTileId(n);i.tileAt===K.Game&&s.tileAt===K.Game?this.replaceTilesFromGameToGame(i.position,s.position):i.tileAt===K.Pick&&s.tileAt===K.Game?this.replaceTilesFromPickToGame(i.index,s.position):i.tileAt===K.Game&&s.tileAt===K.Pick?this.replaceTilesFromPickToGame(s.index,i.position):i.tileAt===K.Pick&&s.tileAt===K.Pick?this.replaceTilesFromPickToPick(i.index,s.index):console.warn("Board: Invalid replacement type")}enableTileMovementControl(){for(const e of this._gameBoard)for(const n of e)n.enableMovementEventListeners();for(const e of this._pickBoard)e.enableMovementEventListeners()}disableTileMovementControl(){for(const e of this._gameBoard)for(const n of e)n.disableMovementEventListeners();for(const e of this._pickBoard)e.disableMovementEventListeners()}isEmptyFieldOnBoard(){for(const e of this._gameBoard)for(const n of e)if(n.isEmpty())return!0;return!1}replaceTilesFromPickToPick(e,n){const i=this.getPickBoardItem(e);this.setPickBoardItem(this.getPickBoardItem(n),e),this.setPickBoardItem(i,n)}replaceTilesFromPickToGame(e,n){const i=this.getPickBoardItem(e);this.setPickBoardItem(this.getGameBoardItem(n[0],n[1]),e),this.setGameBoardItem(i,n[0],n[1])}replaceTilesFromGameToGame(e,n){const i=this.getGameBoardItem(e[0],e[1]);this.setGameBoardItem(this.getGameBoardItem(n[0],n[1]),e[0],e[1]),this.setGameBoardItem(i,n[0],n[1])}decodeTileId(e){if(e.length===1)return{tileAt:K.Pick,index:parseInt(e),position:null};const n=e.split("-");return{tileAt:K.Game,index:null,position:[parseInt(n[0]),parseInt(n[1])]}}printGameBoard(){const e=this._gameBoard.length,n=[];for(let i=0;i<e;i++){n.push([]);for(let s=0;s<e;s++){const o=this.getGameBoardItem(s,i),a=o?`${o.name} - ${o.orientation}`:"uninitialized";n[i].push(a)}}console.table(n)}printPickBoard(){const e=this._pickBoard.length,n=[];for(let i=0;i<e;i++){const s=this.getPickBoardItem(i),o=s?`${s.name} - ${s.orientation}`:"uninitialized";n.push(o)}console.table(n)}printBoardState(){this.printGameBoard(),this.printPickBoard()}printBoundaryMap(){let e="";const n=i=>i?"1":"0";for(const i of this._gameBoard){const s={top:"",mid:"",bottom:"",hr:""};for(const o of i){const a=o.boundary;s.top+=`-${n(a.topBoundary)}-|`,s.mid+=`${n(a.leftBoundary)}-${n(a.rightBoundary)}|`,s.bottom+=`-${n(a.bottomBoundary)}-|`,s.hr+="---|"}e+=s.top.slice(0,-1)+`
`,e+=s.mid.slice(0,-1)+`
`,e+=s.bottom.slice(0,-1)+`
`,e+=s.hr.slice(0,-1)+`
`}console.log(e)}}function $i(t,e,n,i){const s=t.pickBoardSize,o={start:new V(t.positions.start[0],t.positions.start[1]),finish:new V(t.positions.finish[0],t.positions.finish[1])},a=new Ei(n,s,o);for(let r=0;r<n;r++)for(let l=0;l<n;l++){const c=t.board[r][l],u={movable:c.movable,receiver:c.receiver},d=e.getTile(c.tile,i);d.setAttribute("id",`${l}-${r}`);const h=new yt(d,c.orientation,u,c.tile,e.getBoundaries(c.tile));a.setGameBoardItem(h,l,r)}for(let r=0;r<s;r++){const l=t.playerPickTiles[r],c={movable:l.movable,receiver:l.receiver},u=e.getTile(l.tile,i);u.setAttribute("id",r.toString());const d=new yt(u,l.orientation,c,l.tile,e.getBoundaries(l.tile));a.setPickBoardItem(d,r)}return a}function Ti(t,e,n){const i=t.board.length,s=document.createElement("canvas");s.width=i*n,s.height=i*n;const o=[];for(const r of t.board)o.push(r.map(l=>e.getOrientedBuffer(l.tile,n,l.orientation)));for(const r of t.solution){const l=r.pos[0],c=r.pos[1];o[c][l]=e.getOrientedBuffer(r.name,n,r.orientation)}const a=s.getContext("2d");for(let r=0;r<i;r++)for(let l=0;l<i;l++){const c=o[r][l];a.drawImage(c,0,0,n,n,l*n,r*n,n,n)}return s.toDataURL()}const Ue=ee();function Li(t){let e,n,i,s,o,a,r,l,c,u;const d=t[4].default,h=Zt(d,t,t[3],null);return{c(){e=B("div"),n=B("div"),i=B("span"),s=B("h2"),s.textContent="Riešenie",o=S(),a=B("button"),a.innerHTML='<i class="svelte-1hvjols">+</i>',r=S(),h&&h.c(),_(s,"class","svelte-1hvjols"),_(a,"class","svelte-1hvjols"),_(i,"class","dialog__top-bar svelte-1hvjols"),_(n,"class","dialog svelte-1hvjols"),_(e,"class","dialog-background-mist svelte-1hvjols"),re(e,"open",t[1])},m(f,m){P(f,e,m),v(e,n),v(n,i),v(i,s),v(i,o),v(i,a),v(n,r),h&&h.m(n,null),l=!0,c||(u=N(a,"click",t[0]),c=!0)},p(f,[m]){h&&h.p&&(!l||m&8)&&en(h,d,f,f[3],l?Qt(d,f[3],m,null):tn(f[3]),null),(!l||m&2)&&re(e,"open",f[1])},i(f){l||(M(h,f),l=!0)},o(f){A(h,f),l=!1},d(f){f&&T(e),h&&h.d(f),c=!1,u()}}}function xi(t,e,n){let{$$slots:i={},$$scope:s}=e,o;const a=()=>{Me.cancel(),n(1,o=!0)},r=()=>{n(1,o=!1)};return t.$$set=l=>{"$$scope"in l&&n(3,s=l.$$scope)},[r,o,a,s,i]}class Pi extends W{constructor(e){super(),U(this,e,xi,Li,F,{open:2,close:0})}get open(){return this.$$.ctx[2]}get close(){return this.$$.ctx[0]}}function wt(t){let e,n;return{c(){e=B("h1"),n=R(t[3]),_(e,"class","game-board__message svelte-25e0db")},m(i,s){P(i,e,s),v(e,n)},p(i,s){s&8&&Q(n,i[3])},d(i){i&&T(e)}}}function Ci(t){let e,n,i,s,o;return{c(){e=B("p"),n=R(t[4]),i=S(),s=B("img"),_(e,"class","solution-description svelte-25e0db"),_(s,"class","solution-img svelte-25e0db"),xe(s.src,o=t[5])||_(s,"src",o),_(s,"alt","solution_img")},m(a,r){P(a,e,r),v(e,n),P(a,i,r),P(a,s,r)},p(a,r){r&16&&Q(n,a[4]),r&32&&!xe(s.src,o=a[5])&&_(s,"src",o)},d(a){a&&T(e),a&&T(i),a&&T(s)}}}function Ii(t){let e,n,i,s,o=De[t[0].difficulty]+"",a,r,l,c,u,d,h,f,m,y,w,$,L,b,k,p,g,C,E,x,X;m=new hi({props:{tileDimensions:t[0].tileDimensions}});let j=t[1]&&wt(t);b=new ai({props:{isLevelLast:t[2]}}),b.$on("nextlevel",t[10]);let Xt={$$slots:{default:[Ci]},$$scope:{ctx:t}};return C=new Pi({props:Xt}),t[11](C),{c(){e=B("div"),n=B("div"),i=B("p"),s=R("Obtiažnosť: "),a=R(o),r=S(),l=B("div"),c=B("button"),c.textContent="Nápoveda",u=S(),d=B("button"),d.textContent="Riešenie",h=S(),f=B("div"),z(m.$$.fragment),y=S(),j&&j.c(),w=S(),$=B("div"),L=S(),z(b.$$.fragment),k=S(),p=B("div"),p.innerHTML='<div class="pick-board svelte-25e0db"></div>',g=S(),z(C.$$.fragment),_(i,"class","svelte-25e0db"),_(c,"class","svelte-25e0db"),_(d,"class","svelte-25e0db"),_(l,"class","top-control-panel__buttons svelte-25e0db"),_(n,"class","top-control-panel svelte-25e0db"),_($,"class","game-board svelte-25e0db"),_(f,"class","game-board__overlay svelte-25e0db"),_(p,"class","pick-board-background svelte-25e0db"),_(e,"class","level-container svelte-25e0db")},m(O,J){P(O,e,J),v(e,n),v(n,i),v(i,s),v(i,a),v(n,r),v(n,l),v(l,c),v(l,u),v(l,d),v(e,h),v(e,f),H(m,f,null),v(f,y),j&&j.m(f,null),v(f,w),v(f,$),v(e,L),H(b,e,null),v(e,k),v(e,p),P(O,g,J),H(C,O,J),E=!0,x||(X=[N(c,"click",t[7]),N(d,"click",t[9])],x=!0)},p(O,[J]){(!E||J&1)&&o!==(o=De[O[0].difficulty]+"")&&Q(a,o);const nt={};J&1&&(nt.tileDimensions=O[0].tileDimensions),m.$set(nt),O[1]?j?j.p(O,J):(j=wt(O),j.c(),j.m(f,w)):j&&(j.d(1),j=null);const it={};J&4&&(it.isLevelLast=O[2]),b.$set(it);const st={};J&262192&&(st.$$scope={dirty:J,ctx:O}),C.$set(st)},i(O){E||(M(m.$$.fragment,O),M(b.$$.fragment,O),M(C.$$.fragment,O),E=!0)},o(O){A(m.$$.fragment,O),A(b.$$.fragment,O),A(C.$$.fragment,O),E=!1},d(O){O&&T(e),G(m),j&&j.d(),G(b),O&&T(g),t[11](null),G(C,O),x=!1,Y(X)}}}function Si(t,e,n){let{levelDetails:i}=e,{sprites:s}=e,o,a,r,l,c,u,d,h,f,m;const y=Je(),w=p=>{if(document.querySelector(".game-board")===null||document.querySelector(".pick-board")===null)return;o=p.levelNumber,n(2,c=p.isLevelLast),f=p.levelData,n(3,u=p.isLevelLast?"Vyhral si!":"Hotovo!"),n(4,d=ne()?f.solutionDescription.mobile:f.solutionDescription.desktop),n(5,h=Ti(f,s,i.tileDimensions)),ue.set({isFinished:!1,isTileMovementEnabled:!0}),be.set({isDisabled:!0,buttonAction:ae.BallRoll});const g=document.querySelector(".game-board"),C=document.querySelector(".pick-board");g.innerHTML="",C.innerHTML="",a=$i(p.levelData,s,i.gameBoardSize,i.tileDimensions),bi(a),a.populateGameBoardContainer(g),a.populatePickBoardContainer(C);const E=s.getTile("ball",i.tileDimensions);r=new mi(a,g,E),vi(r)},$=()=>{const g={duration:2e3,theme:{"--toastBarBackground":"#dd571c"}},C=f.solution;for(const E of C){const x=a.getGameBoardItem(E.pos[0],E.pos[1]);if(x.name===E.name&&x.orientation===E.orientation)continue;const X=s.getTile(E.name,20);he.push(`
                <div style="display:flex; align-items:center;">
                    Správne políčko na x:${E.pos[0]} y:${E.pos[1]}
                    <img style="transform: rotate(${E.orientation}deg)" src="${X.src}" />
                </div>
            `,g);const j=new V(E.pos[0],E.pos[1]);j.multiply(x.tileHTMLElement.width),x.isEmpty()?Me.highlight(j,"green",2e3):Me.highlight(j,"red",2e3);return}he.push("Máš to správne",g)};Pt(()=>{Ue.subscribe(w),ue.subscribe(g=>{if(n(1,l=g.isFinished),g.isFinished){y("levelfinished",{level:o});return}g.isTileMovementEnabled?(a.enableTileMovementControl(),r.removeBallFromBoard()):(a.disableTileMovementControl(),r.placeBallAtStart())});const p=document.documentElement;p.style.setProperty("--game-board-grid-size",i.gameBoardSize.toString()),p.style.setProperty("--game-board-grid-item-size",`${i.tileDimensions}px`)}),ke(()=>{console.log("LevelComponent: Destroyed")});const L=()=>m.open();function b(p){ze.call(this,t,p)}function k(p){Ne[p?"unshift":"push"](()=>{m=p,n(6,m)})}return t.$$set=p=>{"levelDetails"in p&&n(0,i=p.levelDetails),"sprites"in p&&n(8,s=p.sprites)},[i,l,c,u,d,h,m,$,s,L,b,k]}class Di extends W{constructor(e){super(),U(this,e,Si,Ii,F,{levelDetails:0,sprites:8})}}function Mi(t){let e,n,i,s,o,a,r,l,c;return{c(){e=B("header"),n=B("span"),n.innerHTML='<i class="arrow-back svelte-h9mswh"></i>',i=S(),s=B("h1"),o=R(t[0]),a=S(),r=B("div"),_(n,"class","back-button svelte-h9mswh"),_(s,"class","navbar-title svelte-h9mswh"),_(e,"class","svelte-h9mswh"),_(r,"class","fixed-navbar-bumber svelte-h9mswh")},m(u,d){P(u,e,d),v(e,n),v(e,i),v(e,s),v(s,o),P(u,a,d),P(u,r,d),l||(c=N(n,"click",t[1]),l=!0)},p(u,[d]){d&1&&Q(o,u[0])},i:I,o:I,d(u){u&&T(e),u&&T(a),u&&T(r),l=!1,c()}}}function Ai(t,e,n){let{text:i}=e;const s=()=>le("/");return t.$$set=o=>{"text"in o&&n(0,i=o.text)},[i,s]}class Ut extends W{constructor(e){super(),U(this,e,Ai,Mi,F,{text:0})}}function Oi(t){const e=`game/levels/${t}.json`;return Wt(e)}function ji(){return Wt("game/tiles.json")}async function Wt(t){const e=await fetch(t);return e.ok?await e.json():Promise.reject(e.statusText)}function Hi(t){return new Promise((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=()=>n(`Couldn't load sprite-sheet from [${t}]`),i.src=t})}class tt{constructor(e,n,i){D(this,"image");D(this,"width");D(this,"height");D(this,"tiles");D(this,"boundaries");this.image=e,this.width=n,this.height=i,this.tiles=new Map,this.boundaries=new Map}define(e){const[n,i]=e.index,s=document.createElement("canvas");s.width=this.width,s.height=this.height,s.getContext("2d").drawImage(this.image,n*this.width,i*this.height,this.width,this.height,0,0,this.width,this.height),this.tiles.set(e.name,s),e.boundaries&&this.boundaries.set(e.name,e.boundaries)}getTile(e,n){const i=this.tiles.get(e);if(!i)return null;const s=document.createElement("img");return s.width=n,s.height=n,s.src=i.toDataURL(),s}getOrientedBuffer(e,n,i){const s=this.tiles.get(e);if(!s)return null;const o=document.createElement("canvas");o.width=n,o.height=n;const a=l=>l*Math.PI/180,r=o.getContext("2d");return r.translate(n/2,n/2),r.rotate(a(i)),r.translate(-n/2,-n/2),r.drawImage(s,0,0,this.width,this.height,0,0,n,n),o}getOrientedTile(e,n,i){const s=this.getTile(e,n);return s.style.transform=`rotate(${i}deg)`,s}getBoundaries(e){return this.boundaries.get(e)}static createFromJson(e,n){const i=new tt(e,n.tileWidth,n.tileWidth);return n.tiles.forEach(s=>{i.define(s)}),i}}function Gi(t,e){const n=Math.random()*(e-t+1);return Math.floor(n)+t}function zi(t){if(t.length===0)return null;const e=Gi(0,t.length-1);return t[e]}class Ni{constructor(e,n){D(this,"_cacheHandler");D(this,"_allLevels");D(this,"_availableLevels");this._cacheHandler=new Ht(e),this._allLevels=n;const i=this._cacheHandler.readCache();this._availableLevels=i?ci(n,this._cacheHandler.cacheData):[...n]}nextLevel(){return zi(this._availableLevels)}finishLevel(e){if(!this._availableLevels.includes(e)){console.warn(`LevelServer: Attempt to finish level [${e}], but it is not available`);return}this._availableLevels=this._availableLevels.filter(n=>n!==e),this._availableLevels.length===0?(this._cacheHandler.clearCache(),this._availableLevels=[...this._allLevels]):(this._cacheHandler.appendData(e),this._cacheHandler.writeCache())}isLastLevel(){return this._availableLevels.length===1}}function Ri(t){let e,n;return e=new Di({props:{sprites:t[2],levelDetails:t[1]}}),e.$on("nextlevel",t[4]),e.$on("levelfinished",t[5]),{c(){z(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const o={};s&4&&(o.sprites=i[2]),s&2&&(o.levelDetails=i[1]),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function Fi(t){let e,n;return e=new ti({}),{c(){z(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p:I,i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function qi(t){let e,n,i,s,o,a;e=new Ut({props:{text:t[3]}});const r=[Fi,Ri],l=[];function c(u,d){return u[0]?0:1}return s=c(t),o=l[s]=r[s](t),{c(){z(e.$$.fragment),n=S(),i=B("main"),o.c(),_(i,"class","page-container svelte-cfi0c6")},m(u,d){H(e,u,d),P(u,n,d),P(u,i,d),l[s].m(i,null),a=!0},p(u,[d]){const h={};d&8&&(h.text=u[3]),e.$set(h);let f=s;s=c(u),s===f?l[s].p(u,d):(ie(),A(l[f],1,1,()=>{l[f]=null}),se(),o=l[s],o?o.p(u,d):(o=l[s]=r[s](u),o.c()),M(o,1),o.m(i,null))},i(u){a||(M(e.$$.fragment,u),M(o),a=!0)},o(u){A(e.$$.fragment,u),A(o),a=!1},d(u){G(e,u),u&&T(n),u&&T(i),l[s].d()}}}function Ui(t,e,n){let{params:i}=e,s=!0,o,a,r,l,c,u;Promise.all([Oi(i.difficulty),ji(),Hi("game/spritesheet.png")]).then(([f,m,y])=>{n(2,a=tt.createFromJson(y,m));const w=f.levels.map(($,L)=>L);r=new Ni(i.difficulty,w),c=r.nextLevel(),n(3,u=`Úloha ${c+1}`),Ue.set({levelNumber:c,levelData:f.levels[c],isLevelLast:r.isLastLevel()}),l=f.levels,n(1,o={difficulty:i.difficulty,gameBoardSize:f.gameBoardSize,tileDimensions:f.tileDimensions}),n(0,s=!1)}).catch(f=>{n(0,s=!1),console.error(`Error loading assests: ${f}`)});const d=()=>{Ue.update(f=>(f.levelNumber=r.nextLevel(),f.levelData=l[f.levelNumber],f.isLevelLast=r.isLastLevel(),n(3,u=`Úloha ${f.levelNumber+1}`),f))},h=f=>{console.log("[DEBUG]: Finished level",f.detail.level),r.finishLevel(f.detail.level)};return ke(()=>{console.log("Game component destroyed"),window.removeEventListener("deviceorientation",zt)}),t.$$set=f=>{"params"in f&&n(6,i=f.params)},[s,o,a,u,d,h,i]}class Wi extends W{constructor(e){super(),U(this,e,Ui,qi,F,{params:6})}}const Xi="/~xvalachovicl/X586X_my_random_projects/webte/Final-Assignment/assets/arrows-a353080f.png",Yi="/~xvalachovicl/X586X_my_random_projects/webte/Final-Assignment/assets/mobile_sensor-206202c5.png";function Ki(t){let e;return{c(){e=B("li"),e.textContent="Pohyb loptičky: Šípkami na klavesnici",_(e,"class","svelte-1xsovi8")},m(n,i){P(n,e,i)},d(n){n&&T(e)}}}function Ji(t){let e;return{c(){e=B("li"),e.textContent="Pohyb loptičky: Naklánanie zariadenia po osiach x a y",_(e,"class","svelte-1xsovi8")},m(n,i){P(n,e,i)},d(n){n&&T(e)}}}function Vi(t){let e,n;return{c(){e=B("img"),xe(e.src,n=Xi)||_(e,"src",n),_(e,"alt","keyboard_arrows"),_(e,"class","svelte-1xsovi8")},m(i,s){P(i,e,s)},p:I,d(i){i&&T(e)}}}function Zi(t){let e,n;return{c(){e=B("img"),xe(e.src,n=Yi)||_(e,"src",n),_(e,"alt","mobile_sensor"),_(e,"class","svelte-1xsovi8")},m(i,s){P(i,e,s)},p:I,d(i){i&&T(e)}}}function Qi(t){let e,n,i,s,o,a,r,l,c,u,d,h,f,m,y,w,$,L;e=new Ut({props:{text:"Popis"}});function b(x,X){return x[0]?Ji:Ki}let p=b(t)(t);function g(x,X){return x[0]?Zi:Vi}let E=g(t)(t);return{c(){z(e.$$.fragment),n=S(),i=B("main"),s=B("h1"),s.textContent="Puzzle Path",o=S(),a=B("section"),a.innerHTML=`<h2 class="svelte-1xsovi8">O hre</h2> 
        <p class="svelte-1xsovi8">Hra <strong>Puzzle Path</strong> je jednoduchá logická hra, ktorej úlohou je dostať loptičku
            po vytvorenej ceste do cieľa označeného bránkou. Hra má dve voliteľné obtiažnosti (ľahká, ťažká).
            Káždá obtiažnosť má 5 úrovní. Úroveň je úspešne dokončená, ak sa hráčovi podarí dostať loptičku do cieľa.
            Hráč nemôže hrať úroveň viac-krát, kým úspešne nedokončí ostatne úrovne.</p>`,r=S(),l=B("section"),l.innerHTML=`<h2 class="svelte-1xsovi8">Pravidlá hry</h2> 
        <p class="svelte-1xsovi8">Hráč si vyberá políčka cesty zo spodnej časti obrazovky a vkladá ich potiahnutím na voľné políčka na hracej ploche.
            Po zaplnení všetkých voľných políčok na hracej ploche, sa odomkne tlačidlo (Položiť loptičku). Po jeho stlačení
            sa objaví loptička, ktorú sa snaží dostať zo štartu do cieľa po vytvorenej ceste za pomoci ovládacích prvkov.</p>`,c=S(),u=B("section"),d=B("h2"),d.textContent="Ovládanie",h=S(),f=B("ul"),m=B("li"),m.textContent="Presun políčok: Drag & Drop",y=S(),p.c(),w=S(),$=B("div"),E.c(),_(s,"class","svelte-1xsovi8"),_(a,"class","svelte-1xsovi8"),_(l,"class","svelte-1xsovi8"),_(d,"class","svelte-1xsovi8"),_(m,"class","svelte-1xsovi8"),_(f,"class","svelte-1xsovi8"),_($,"class","image-container svelte-1xsovi8"),_(u,"class","svelte-1xsovi8"),_(i,"class","page-container")},m(x,X){H(e,x,X),P(x,n,X),P(x,i,X),v(i,s),v(i,o),v(i,a),v(i,r),v(i,l),v(i,c),v(i,u),v(u,d),v(u,h),v(u,f),v(f,m),v(f,y),p.m(f,null),v(u,w),v(u,$),E.m($,null),L=!0},p(x,[X]){E.p(x,X)},i(x){L||(M(e.$$.fragment,x),L=!0)},o(x){A(e.$$.fragment,x),L=!1},d(x){G(e,x),x&&T(n),x&&T(i),p.d(),E.d()}}}function es(t){return[ne()]}class ts extends W{constructor(e){super(),U(this,e,es,Qi,F,{})}}function ns(t){let e,n,i,s;return e=new Pn({props:{routes:t[0]}}),i=new Xn({props:{options:t[1]}}),{c(){z(e.$$.fragment),n=S(),z(i.$$.fragment)},m(o,a){H(e,o,a),P(o,n,a),H(i,o,a),s=!0},p:I,i(o){s||(M(e.$$.fragment,o),M(i.$$.fragment,o),s=!0)},o(o){A(e.$$.fragment,o),A(i.$$.fragment,o),s=!1},d(o){G(e,o),o&&T(n),G(i,o)}}}function is(t){return[{"/":Qn,"/game/:difficulty":Wi,"/description":ts},{}]}class ss extends W{constructor(e){super(),U(this,e,is,ns,F,{})}}new ss({target:document.getElementById("app")});
